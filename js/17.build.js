(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{108:function(e,t,a){var r=a(218);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,a(0).default)("1290ff69",r,!1,{})},109:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};t.default={components:{Icon:()=>a.e(5).then(a.bind(null,93))},methods:{delegate(e){this.canvas&&this[e]()},layerUp(){let e;this.c.bringForward(this.activeLayer.group),e=this.c.getObjects().findIndex(e=>e===this.activeLayer.group),this.layers.insert(e,this.layers.remove(this.activeLayer))},layerDown(){let e;this.c.sendBackwards(this.activeLayer.group),e=this.c.getObjects().findIndex(e=>e===this.activeLayer.group),this.layers.insert(e,this.layers.remove(this.activeLayer))},layerAdd(){let e=new fabric.Group;e.layer=!0,e.type="empty",this.c.add(e)},delete(){this.c.remove(this.activeLayer.group),this.layers.remove(this.activeLayer),this.canvas.activeLayer=null},activeLayerAlias(e,t){this.canvas.activeLayer=t,this.c.setActiveObject(t.group),e.target.closest(".layer-eye")&&(t.visible=t.group.visible=!t.group.visible),this.c.requestRenderAll()},activeObject(e){e.group.unactive=!0,this.c.setActiveObject(e.group),this.c.requestRenderAll()},discardObject(){this.c.setActiveObject(this.canvas.activeLayer.group),this.c.requestRenderAll()},focusTitleInput(e){$(this.$refs.titleInput).css("display","block").val(e).select().prev().css("display","none")},blurTitleInput(){$(this.$refs.titleInput).css("display","none").prev().css("display","block")}},mounted(){new Sortable(this.$refs.layers,{draggable:".layer",animation:150,scrollSensitivity:20,scrollSpeed:30,onUpdate:e=>{let t=this.layers.length-1-e.newIndex,a=this.layers.length-1-e.oldIndex;this.layers.splice(t,0,this.layers.removeIndex(a)),this.layers[t].group.moveTo(t)}}),this.ps=new PerfectScrollbar(this.$refs.layers)},computed:r({activeLayer(){return this.canvas.activeLayer},layers(){return this.canvas?this.canvas.layers:[]},c(){return this.canvas.c}},Vuex.mapState(["canvas"])),data:()=>({layerTools:["layerUp","layerDown","layerAdd","delete"],layerActive:null,reverse:reverse})}},110:function(e,t,a){"use strict";a.r(t);var r=a(109),n=a.n(r);for(var s in r)"default"!==s&&function(e){a.d(t,e,function(){return r[e]})}(s);t.default=n.a},189:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"layers-wrapper"},[a("div",{directives:[{name:"resize",rawName:"v-resize"}],ref:"layers",staticClass:"layers",style:{height:"300px"}},e._l(e.layers.slice().reverse(),function(t){return a("div",{key:t.id,class:["layer",{active:e.activeLayer===t}],attrs:{"data-id":t.id},on:{click:function(a){e.activeLayerAlias(a,t)},mouseover:function(a){e.activeObject(t)},mouseout:function(t){e.discardObject()}}},[a("div",{staticClass:"layer-eye"},[a("Icon",{staticClass:"eye",attrs:{icon:t.visible?"eye":"eye-cross"}})],1),e._v(" "),a("div",{staticClass:"layer-title"},[a("div",{staticClass:"layer-title__preview",on:{dblclick:function(a){e.focusTitleInput(t.title)}}},[e._v(e._s(t.title))]),e._v(" "),a("input",{ref:"titleInput",refInFor:!0,staticClass:"layer-title__input",on:{keydown:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.blurTitleInput(t):null},input:function(e){t.title=e.target.value},blur:e.blurTitleInput}})])])})),e._v(" "),a("div",{staticClass:"layers-tools"},e._l(e.layerTools,function(t,r){return a("div",{key:r,staticClass:"layers-tool bg-anim-icon",on:{click:function(a){e.delegate(t)}}},[a("Icon",{attrs:{icon:t}})],1)}))])},n=[];r._withStripped=!0,a.d(t,"a",function(){return r}),a.d(t,"b",function(){return n})},218:function(e,t,a){(e.exports=a(1)(!1)).push([e.i,"\n.layers-wrapper .layers[data-v-0ec078a2] {\n  position: relative;\n  display: flex;\n  flex-direction: column;\n}\n.layers-wrapper .layers .layer[data-v-0ec078a2] {\n    position: relative;\n    display: flex;\n    flex-shrink: 0;\n    align-items: center;\n    color: var(--text-color);\n    background: var(--main-color);\n    border-bottom: 1px solid var(--border-color);\n}\n.layers-wrapper .layers .layer-eye[data-v-0ec078a2] {\n      width: 30px;\n      height: 30px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      flex-shrink: 0;\n      border-right: 1px solid var(--border-color);\n}\n.layers-wrapper .layers .layer-title[data-v-0ec078a2] {\n      height: 30px;\n      width: 100%;\n      display: flex;\n      align-items: center;\n}\n.layers-wrapper .layers .layer-title__preview[data-v-0ec078a2] {\n        padding-left: 6px;\n}\n.layers-wrapper .layers .layer-title__input[data-v-0ec078a2] {\n        padding-left: 6px;\n        display: none;\n        background: var(--bg-body);\n        color: var(--text-color);\n        height: 100%;\n        border: none;\n        outline: none;\n}\n.layers-wrapper .layers .layer.active[data-v-0ec078a2] {\n    background: var(--bg-color);\n}\n.layers-tools[data-v-0ec078a2] {\n  display: flex;\n}\n.layers-tools .layers-tool[data-v-0ec078a2] {\n    padding: 5px;\n}\n",""])},219:function(e,t,a){"use strict";var r=a(108);a.n(r).a},220:function(e,t,a){"use strict";a.r(t);var r=a(189),n=a(110);for(var s in n)"default"!==s&&function(e){a.d(t,e,function(){return n[e]})}(s);a(219);var i=a(2),l=Object(i.a)(n.default,r.a,r.b,!1,null,"0ec078a2",null);l.options.__file="src/js/components/tools/layer-tools.vue",t.default=l.exports}}]);