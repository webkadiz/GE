{"version":3,"sources":["webpack:///src/js/components/tools/layer-tools.vue","webpack:///./src/js/components/tools/layer-tools.vue?8f49","webpack:///./src/js/components/tools/layer-tools.vue?8a10","webpack:///./src/js/components/tools/layer-tools.vue?5142","webpack:///./src/js/components/tools/layer-tools.vue","webpack:///./src/js/components/tools/layer-tools.vue?8317","webpack:///./src/js/components/tools/layer-tools.vue?c202"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA;;;;iJAIA;AAFA;;oBAIA;0BACA;AACA;cACA;UACA;2CACA;kFACA;wDACA;AACA;gBACA;UACA;4CACA;kFACA;wDACA;AACA;eACA;6BACA;oBACA;mBAEA;;iBACA;AACA;;AACA;qCACA;8BACA;gCACA;AACA;+BACA;gCACA;mCACA;0CACA;2DACA;AACA;aACA;AACA;wBACA;6BACA;mCACA;aACA;AACA;oBACA;qDACA;aACA;AACA;2BACA;iGACA;AACA;qBACA;4EACA;AAEA;AAnDA;YAoDA;;iBAEA;iBACA;yBACA;mBACA;qBACA;;wDACA;sEACA;iDACA;AAGA;AAXA;;8CAYA;AACA;AACA;kBACA;yBACA;AACA;aACA;0CACA;aACA;AACA;QACA;yBACA;AACA;oBAEA;SACA;;kBAEA,CACA,WACA,aACA,YAEA;mBACA;eAEA;AATA;AAUA;AA/FA,E;;;;;;;;;;;AChCA;AACA;;;AAGA;AACA,qEAAsE,uBAAuB,kBAAkB,2BAA2B,GAAG,mDAAmD,yBAAyB,oBAAoB,qBAAqB,0BAA0B,+BAA+B,oCAAoC,mDAAmD,GAAG,uDAAuD,oBAAoB,qBAAqB,sBAAsB,4BAA4B,gCAAgC,uBAAuB,oDAAoD,GAAG,yDAAyD,qBAAqB,oBAAoB,sBAAsB,4BAA4B,GAAG,kEAAkE,4BAA4B,GAAG,gEAAgE,4BAA4B,wBAAwB,qCAAqC,mCAAmC,uBAAuB,uBAAuB,wBAAwB,GAAG,0DAA0D,kCAAkC,GAAG,kCAAkC,kBAAkB,GAAG,+CAA+C,mBAAmB,GAAG;;AAE72C;;;;;;;;;;;;;;;ACPA;AAAA;AACA;AACA;AACA;AACA,oBAAoB,gCAAgC;AACpD;AACA;AACA;AACA,sBAAsB,sCAAsC;AAC5D;AACA;AACA,gBAAgB;AAChB,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,8BAA8B,oCAAoC;AAClE,oBAAoB,sBAAsB;AAC1C;AACA;AACA;AACA,eAAe;AACf;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,eAAe,2BAA2B;AAC1C;AACA;AACA;AACA,0BAA0B;AAC1B,iBAAiB;AACjB;AACA;AACA;AACA;AACA,uBAAuB,6BAA6B;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA,mBAAmB;AACnB;AACA;AACA,eAAe;AACf;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO,8BAA8B;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,uBAAuB,SAAS,kBAAkB,EAAE;AACpD;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC5GA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C;AAC/C;AACA,Y;;;;;;;;;;;;;;;;;;ACVkC;AAClC;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,uBAiBA;AACA;AACA,gF;;;;;;;;;;;;;;;;ACvCsL,gPAAoB,C;;;;;;;;;;;;;;;;ACA0L,wZAAoB,C","file":"js/10.build.js","sourcesContent":["<template>\n\t<div class=\"layers-wrapper\" >\n\n    <div ref=\"layers\" class=\"layers\" v-resize :style=\"{height: '300px'}\">\n      <div @click=\"activeLayerAlias($event, layer)\" @mouseover=\"activeObject(layer)\" @mouseout=\"discardObject()\"\n          :class=\"['layer', {active: activeLayer === layer}]\" \n          v-for=\"layer in layers.slice().reverse()\" :key=\"layer.id\" :data-id=\"layer.id\">\n\n        <div class=\"layer-eye\">\n\n          <Icon class=\"eye\" :icon=\"layer.visible ? 'eye' : 'eye-cross'\"></Icon>\n        </div>\n        \n        <div class=\"layer-title\">\n          <div @dblclick=\"focusTitleInput(layer.title)\" class=\"layer-title__preview\">{{layer.title}}</div>\n          <input @keydown.enter=\"blurTitleInput\" \n                 @input=\"layer.title = $event.target.value\" \n                 ref=\"titleInput\" @blur=\"blurTitleInput\" class=\"layer-title__input\">\n        </div>\n      </div>\n    </div>\n\n\t\t<div  class=\"layers-tools\">\n\t\t\t<div @click=\"delegate(layerTool)\" class=\"layers-tool bg-anim-icon\" v-for=\"(layerTool, index) in layerTools\" :key=\"index\">\n\t\t\t\t<Icon :icon=\"layerTool\"></Icon>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nexport default {\n  components: {\n    Icon: () => import('../icon.vue')\n  },\n  methods: {\n    delegate(event) {\n      this.canvas && this[event]()\n    },\n    layerUp() {\n      let index;\n      this.c.bringForward(this.activeLayer.group);\n      index = this.c.getObjects().findIndex(object => object === this.activeLayer.group);\n      this.layers.insert(index, this.layers.remove(this.activeLayer));\n    },\n    layerDown() {\n      let index;\n      this.c.sendBackwards(this.activeLayer.group);\n      index = this.c.getObjects().findIndex(object => object === this.activeLayer.group);\n      this.layers.insert(index, this.layers.remove(this.activeLayer));\n    },\n    layerAdd() {\n      let group = new fabric.Group();\n      group.layer = true;\n      group.type = 'empty'\n\n      this.c.add(group)\n    },\n    delete() {// layerDelete\n      this.c.remove(this.activeLayer.group);\n      this.layers.remove(this.activeLayer);\n      this.canvas.activeLayer = null;\n    },\n    activeLayerAlias(e, layer) {\n      this.canvas.activeLayer = layer;\n      this.c.setActiveObject(layer.group)\n      if (e.target.closest('.layer-eye')) {\n        layer.visible = layer.group.visible = !layer.group.visible;\n      }\n      this.c.requestRenderAll();\n    },\n    activeObject(layer) {\n      layer.group.unactive = true;\n      this.c.setActiveObject(layer.group)\n      this.c.requestRenderAll()\n    },\n    discardObject(){\n      this.c.setActiveObject(this.canvas.activeLayer.group)\n      this.c.requestRenderAll()\n    },\n    focusTitleInput(title) {\n      $(this.$refs.titleInput).css('display', 'block').val(title).select().prev().css('display', 'none')\n    },\n    blurTitleInput() {\n      $(this.$refs.titleInput).css('display', 'none').prev().css('display', 'block')\n    }\n  },\n  mounted() {\n    new Sortable(this.$refs.layers, {\n      draggable: '.layer',\n      animation: 150,\n      scrollSensitivity: 20,\n      scrollSpeed: 30,\n      onUpdate: e => {\n        let newIndexRevert = this.layers.length - 1 - e.newIndex, oldIndexRevert = this.layers.length - 1 - e.oldIndex\n\t\t\t\tthis.layers.splice(newIndexRevert, 0, this.layers.removeIndex(oldIndexRevert))\n        this.layers[newIndexRevert].group.moveTo(newIndexRevert)\n      }\n    });\n\n    this.ps = new PerfectScrollbar(this.$refs.layers)\n  },\n  computed: {\n    activeLayer() {\n      return this.canvas.activeLayer;\n    },\n    layers() {\n      if (this.canvas) return this.canvas.layers;\n      return [];\n    },\n    c() {\n      return this.canvas.c;\n    },\n    ...Vuex.mapState([\"canvas\"])\n  },\n  data() {\n    return {\n      layerTools: [\n        \"layerUp\",\n        \"layerDown\",\n        \"layerAdd\",\n        \"delete\"\n      ],\n      layerActive: null,\n      reverse: reverse\n    };\n  }\n};\n</script>\n\n<style lang=\"sass\" scoped>\n@import 'config-style'\n\n.layers-wrapper\n  .layers\n    position: relative\n    display: flex\n    flex-direction: column\n    .layer\n      position: relative\n      \n      display: flex\n      flex-shrink: 0\n      align-items: center\n      color: var(--text-color)\n      background: var(--main-color)\n      +bb()\n      &-eye\n        width: 30px\n        height: 30px\n        display: flex\n        align-items: center\n        justify-content: center\n        flex-shrink: 0\n        +br()\n      &-title\n        height: 30px\n        width: 100%\n        display: flex\n        align-items: center\n        &__preview\n          padding-left: 6px\n        &__input\n          padding-left: 6px\n          display: none\n          background: var(--bg-body)\n          color: var(--text-color)\n          height: 100%\n          border: none\n          outline: none\n    .layer.active\n      background: var(--bg-color)\n\n\n.layers-tools\n\tdisplay: flex\n\t.layers-tool\n\t\tpadding: 5px\n\n\n\n</style>\n","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"\\n.layers-wrapper .layers[data-v-0ec078a2] {\\n  position: relative;\\n  display: flex;\\n  flex-direction: column;\\n}\\n.layers-wrapper .layers .layer[data-v-0ec078a2] {\\n    position: relative;\\n    display: flex;\\n    flex-shrink: 0;\\n    align-items: center;\\n    color: var(--text-color);\\n    background: var(--main-color);\\n    border-bottom: 1px solid var(--border-color);\\n}\\n.layers-wrapper .layers .layer-eye[data-v-0ec078a2] {\\n      width: 30px;\\n      height: 30px;\\n      display: flex;\\n      align-items: center;\\n      justify-content: center;\\n      flex-shrink: 0;\\n      border-right: 1px solid var(--border-color);\\n}\\n.layers-wrapper .layers .layer-title[data-v-0ec078a2] {\\n      height: 30px;\\n      width: 100%;\\n      display: flex;\\n      align-items: center;\\n}\\n.layers-wrapper .layers .layer-title__preview[data-v-0ec078a2] {\\n        padding-left: 6px;\\n}\\n.layers-wrapper .layers .layer-title__input[data-v-0ec078a2] {\\n        padding-left: 6px;\\n        display: none;\\n        background: var(--bg-body);\\n        color: var(--text-color);\\n        height: 100%;\\n        border: none;\\n        outline: none;\\n}\\n.layers-wrapper .layers .layer.active[data-v-0ec078a2] {\\n    background: var(--bg-color);\\n}\\n.layers-tools[data-v-0ec078a2] {\\n  display: flex;\\n}\\n.layers-tools .layers-tool[data-v-0ec078a2] {\\n    padding: 5px;\\n}\\n\", \"\"]);\n\n// exports\n","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"div\", { staticClass: \"layers-wrapper\" }, [\n    _c(\n      \"div\",\n      {\n        directives: [{ name: \"resize\", rawName: \"v-resize\" }],\n        ref: \"layers\",\n        staticClass: \"layers\",\n        style: { height: \"300px\" }\n      },\n      _vm._l(_vm.layers.slice().reverse(), function(layer) {\n        return _c(\n          \"div\",\n          {\n            key: layer.id,\n            class: [\"layer\", { active: _vm.activeLayer === layer }],\n            attrs: { \"data-id\": layer.id },\n            on: {\n              click: function($event) {\n                _vm.activeLayerAlias($event, layer)\n              },\n              mouseover: function($event) {\n                _vm.activeObject(layer)\n              },\n              mouseout: function($event) {\n                _vm.discardObject()\n              }\n            }\n          },\n          [\n            _c(\n              \"div\",\n              { staticClass: \"layer-eye\" },\n              [\n                _c(\"Icon\", {\n                  staticClass: \"eye\",\n                  attrs: { icon: layer.visible ? \"eye\" : \"eye-cross\" }\n                })\n              ],\n              1\n            ),\n            _vm._v(\" \"),\n            _c(\"div\", { staticClass: \"layer-title\" }, [\n              _c(\n                \"div\",\n                {\n                  staticClass: \"layer-title__preview\",\n                  on: {\n                    dblclick: function($event) {\n                      _vm.focusTitleInput(layer.title)\n                    }\n                  }\n                },\n                [_vm._v(_vm._s(layer.title))]\n              ),\n              _vm._v(\" \"),\n              _c(\"input\", {\n                ref: \"titleInput\",\n                refInFor: true,\n                staticClass: \"layer-title__input\",\n                on: {\n                  keydown: function($event) {\n                    if (\n                      !(\"button\" in $event) &&\n                      _vm._k($event.keyCode, \"enter\", 13, $event.key, \"Enter\")\n                    ) {\n                      return null\n                    }\n                    return _vm.blurTitleInput($event)\n                  },\n                  input: function($event) {\n                    layer.title = $event.target.value\n                  },\n                  blur: _vm.blurTitleInput\n                }\n              })\n            ])\n          ]\n        )\n      })\n    ),\n    _vm._v(\" \"),\n    _c(\n      \"div\",\n      { staticClass: \"layers-tools\" },\n      _vm._l(_vm.layerTools, function(layerTool, index) {\n        return _c(\n          \"div\",\n          {\n            key: index,\n            staticClass: \"layers-tool bg-anim-icon\",\n            on: {\n              click: function($event) {\n                _vm.delegate(layerTool)\n              }\n            }\n          },\n          [_c(\"Icon\", { attrs: { icon: layerTool } })],\n          1\n        )\n      })\n    )\n  ])\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/index.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/lib/loader.js??ref--2-2!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./layer-tools.vue?vue&type=style&index=0&id=0ec078a2&lang=sass&scoped=true\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"1290ff69\", content, false, {});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../node_modules/css-loader/index.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/lib/loader.js??ref--2-2!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./layer-tools.vue?vue&type=style&index=0&id=0ec078a2&lang=sass&scoped=true\", function() {\n     var newContent = require(\"!!../../../../node_modules/css-loader/index.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/lib/loader.js??ref--2-2!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./layer-tools.vue?vue&type=style&index=0&id=0ec078a2&lang=sass&scoped=true\");\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","import { render, staticRenderFns } from \"./layer-tools.vue?vue&type=template&id=0ec078a2&scoped=true\"\nimport script from \"./layer-tools.vue?vue&type=script&lang=js\"\nexport * from \"./layer-tools.vue?vue&type=script&lang=js\"\nimport style0 from \"./layer-tools.vue?vue&type=style&index=0&id=0ec078a2&lang=sass&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0ec078a2\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/webkadiz/Projects/current/GE/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('0ec078a2', component.options)\n    } else {\n      api.reload('0ec078a2', component.options)\n    }\n    module.hot.accept(\"./layer-tools.vue?vue&type=template&id=0ec078a2&scoped=true\", function () {\n      api.rerender('0ec078a2', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/js/components/tools/layer-tools.vue\"\nexport default component.exports","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./layer-tools.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./layer-tools.vue?vue&type=script&lang=js\"","import mod from \"-!../../../../node_modules/vue-style-loader/index.js!../../../../node_modules/css-loader/index.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/lib/loader.js??ref--2-2!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./layer-tools.vue?vue&type=style&index=0&id=0ec078a2&lang=sass&scoped=true\"; export default mod; export * from \"-!../../../../node_modules/vue-style-loader/index.js!../../../../node_modules/css-loader/index.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/lib/loader.js??ref--2-2!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./layer-tools.vue?vue&type=style&index=0&id=0ec078a2&lang=sass&scoped=true\""],"sourceRoot":""}